{{- $prefix := "https://" -}}
{{- $baseUrl := .Get 0 -}}
{{- $id := .Get 1 -}}
{{- $json := getJSON $prefix $baseUrl "/api/v1/statuses/" $id -}}
{{- $cw := $json.spoiler_text -}}

{{ if eq $cw "" }}
<blockquote class="fediverse-status">
  <div class="fediverse-status__content">
  {{- $json.content | markdownify -}}
  </div>
  <footer>&mdash;&nbsp;<cite>{{- $json.account.display_name -}}&nbsp;(@{{- $json.account.acct -}}&#8203;@{{- $baseUrl -}}) <a href="{{- $json.url -}}">{{- dateFormat "January 2, 2006" $json.created_at -}}</a></cite></footer>
</blockquote>
{{ else }}
<blockquote class="fediverse-status fediverse-status-cw">
  <input class="fediverse-status-cw__input" id="cw-{{ $baseUrl }}-{{ $id }}" type="checkbox" name="cw" />
  <label class="fediverse-status-cw__label" for="cw-{{ $baseUrl }}-{{ $id }}">{{- $json.spoiler_text | markdownify -}}</label>
  <div class="fediverse-status-cw__content">
  {{- $json.content | markdownify -}}
  </div>
  <footer>&mdash;&nbsp;<cite>{{- $json.account.display_name -}}&nbsp;(@{{- $json.account.acct -}}&#8203;@{{- $baseUrl -}}) <a href="{{- $json.url -}}">{{- dateFormat "January 2, 2006" $json.created_at -}}</a></cite></footer>
</blockquote>
{{ end}}
